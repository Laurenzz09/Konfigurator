<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konfigurator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-image: url('texxeo_SmartGate Classic_Home_Header.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
        }
        .main-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px 0;
        }
        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        .language-selector select {
            padding: 5px;
            border-radius: 5px;
        }
        .config-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 80%;
        }
        .config-box {
            position: relative;
            background-color: white;
            padding: 20px;
            margin: 10px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: calc(25% - 40px);
            box-sizing: border-box;
        }
        .config-box h2 {
            margin-top: 0;
        }
        .config-box label {
            display: block;
            margin: 10px 0 5px;
        }
        .config-box input {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .config-box button {
            width: 100%;
            padding: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .config-box button:hover {
            background-color: #0056b3;
        }
        .add-box, .remove-box {
            cursor: pointer;
            font-size: 1.5em;
            position: absolute;
            top: 10px;
        }
        .add-box {
            right: 40px;
        }
        .remove-box {
            right: 10px;
        }
        .result {
            margin-top: 10px;
            font-size: 1.2em;
            color: #333;
        }
        .view-results {
            position: fixed;
            right: 20px;
            top: 60px;
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
        }
        .view-results:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
<div class="language-selector">
    <img id="language-flag" src="https://www.countryflags.com/wp-content/uploads/germany-flag-png-large.png" alt="Language Flag" style="width:30px; vertical-align: middle; margin-right: 5px;">
    <select id="language-select" onchange="changeLanguage()">
        <option value="de" data-image="https://www.countryflags.com/wp-content/uploads/germany-flag-png-large.png">Deutsch</option>
        <option value="en" data-image="https://www.countryflags.com/wp-content/uploads/united-kingdom-flag-png-large.png">English</option>
    </select>
</div>
<button class="view-results" onclick="viewResults()" data-translate-key="ergebnisseAnzeigen">Ergebnisse anzeigen</button>
<div class="main-container">
    <div class="config-container" id="config-container">
        <!-- Die Konfigurationsboxen werden hier durch das Skript eingefügt -->
    </div>
</div>

<script>
    let boxCounter = 1;

    function createBox(config = {}) {
        boxCounter++;
        const container = document.getElementById('config-container');
        const newBox = document.createElement('div');
        newBox.className = 'config-box';
        newBox.id = `box-${boxCounter}`;
        newBox.innerHTML = `
            <span class="add-box" onclick="addBox()">&#43;</span>
            <span class="remove-box" onclick="removeBox(this)">&#8722;</span>
            <h2 data-translate-key="artikel">Artikel</h2>
            <label for="artikelname-${boxCounter}" data-translate-key="artikelname">Artikelname</label>
            <input type="text" id="artikelname-${boxCounter}" name="artikelname" value="${config.artikelname || ''}">

            <label for="artikellaengen-${boxCounter}" data-translate-key="artikellaengen">Artikel Längen</label>
            <input type="text" id="artikellaengen-${boxCounter}" name="artikellaengen" value="${config.artikellaengen || ''}">

            <label for="artikelgroessen-${boxCounter}" data-translate-key="artikelgroessen">Artikel Größen</label>
            <input type="text" id="artikelgroessen-${boxCounter}" name="artikelgroessen" value="${config.artikelgroessen || ''}">

            <label for="vollzeitMitarbeiter-${boxCounter}" data-translate-key="vollzeitMitarbeiter">Vollzeitmitarbeiter</label>
            <input type="number" id="vollzeitMitarbeiter-${boxCounter}" name="vollzeitMitarbeiter" value="${config.vollzeitMitarbeiter || ''}">

            <label for="teilzeitMitarbeiter-${boxCounter}" data-translate-key="teilzeitMitarbeiter">Teilzeitmitarbeiter</label>
            <input type="number" id="teilzeitMitarbeiter-${boxCounter}" name="teilzeitMitarbeiter" value="${config.teilzeitMitarbeiter || ''}">

            <label for="tauschquote-${boxCounter}" data-translate-key="tauschquote">Tauschquote pro Woche</label>
            <input type="number" step="0.01" id="tauschquote-${boxCounter}" name="tauschquote" value="${config.tauschquote || ''}">

            <label for="lieferrhythmus-${boxCounter}" data-translate-key="lieferrhythmus">Lieferrhythmus</label>
            <input type="text" id="lieferrhythmus-${boxCounter}" name="lieferrhythmus" value="${config.lieferrhythmus || '3'}">

            <button type="button" onclick="calculate('box-${boxCounter}')" data-translate-key="berechnen">Berechnen</button>
            <div class="result" id="result-${boxCounter}"></div>
        `;
        container.appendChild(newBox);
        updateRemoveButtons();
    }

    function addBox() {
        createBox();
    }

    function removeBox(element) {
        const box = element.parentElement;
        box.remove();
        updateRemoveButtons();
    }

    function updateRemoveButtons() {
        const removeButtons = document.querySelectorAll('.remove-box');
        if (removeButtons.length === 1) {
            removeButtons[0].style.display = 'none';
        } else {
            removeButtons.forEach(button => button.style.display = 'inline');
        }
    }

    function viewResults() {
        results = [];
        const boxes = document.querySelectorAll('.config-box');
        boxes.forEach(box => {
            const artikelname = box.querySelector('input[name="artikelname"]').value;
            const artikellaengen = box.querySelector('input[name="artikellaengen"]').value;
            const artikelgroessen = box.querySelector('input[name="artikelgroessen"]').value;
            const vollzeitMitarbeiter = parseFloat(box.querySelector('input[name="vollzeitMitarbeiter"]').value) || 0;
            const teilzeitMitarbeiter = parseFloat(box.querySelector('input[name="teilzeitMitarbeiter"]').value) || 0;
            const tauschquote = parseFloat(box.querySelector('input[name="tauschquote"]').value) || 0;
            const lieferrhythmus = box.querySelector('input[name="lieferrhythmus"]').value;

            const teilzeitMitarbeiter1Ergebnis = teilzeitMitarbeiter * 0.5;
            const mitarbeiterAnzahl = vollzeitMitarbeiter + teilzeitMitarbeiter1Ergebnis;
            const mitarbeiterAnzahlGerundet = Math.ceil(mitarbeiterAnzahl);
            const teileProMitarbeiter = mitarbeiterAnzahlGerundet * tauschquote;
            const ausstattungsmenge = teileProMitarbeiter * 3;

            const result = {
                artikelname,
                artikellaengen,
                artikelgroessen,
                vollzeitMitarbeiter,
                teilzeitMitarbeiter,
                tauschquote,
                lieferrhythmus,
                teileProMitarbeiter,
                ausstattungsmenge
            };

            results.push(result);
        });
        sessionStorage.setItem('results', JSON.stringify(results));
        window.location.href = 'results.html';
    }

    function calculate(boxId) {
        const box = document.getElementById(boxId);
        const artikelname = box.querySelector('input[name="artikelname"]').value;
        const artikellaengen = box.querySelector('input[name="artikellaengen"]').value;
        const artikelgroessen = box.querySelector('input[name="artikelgroessen"]').value;
        const vollzeitMitarbeiter = parseFloat(box.querySelector('input[name="vollzeitMitarbeiter"]').value) || 0;
        const teilzeitMitarbeiter = parseFloat(box.querySelector('input[name="teilzeitMitarbeiter"]').value) || 0;
        const tauschquote = parseFloat(box.querySelector('input[name="tauschquote"]').value) || 0;
        const lieferrhythmus = box.querySelector('input[name="lieferrhythmus"]').value;

        const teilzeitMitarbeiter1Ergebnis = teilzeitMitarbeiter * 0.5;
        const mitarbeiterAnzahl = vollzeitMitarbeiter + teilzeitMitarbeiter1Ergebnis;
        const mitarbeiterAnzahlGerundet = Math.ceil(mitarbeiterAnzahl);
        const teileProMitarbeiter = mitarbeiterAnzahlGerundet * tauschquote;
        const ausstattungsmenge = teileProMitarbeiter * 3;

        console.log('Artikelname:', artikelname);
        console.log('Artikel Längen:', artikellaengen);
        console.log('Artikel Größen:', artikelgroessen);
        console.log('Vollzeitmitarbeiter:', vollzeitMitarbeiter);
        console.log('Teilzeitmitarbeiter:', teilzeitMitarbeiter);
        console.log('Tauschquote pro Woche:', tauschquote);
        console.log('Lieferrhythmus:', lieferrhythmus);
        console.log('Teilzeit Mitarbeiter Ergebnis:', teilzeitMitarbeiter1Ergebnis);
        console.log('Mitarbeiter Anzahl:', mitarbeiterAnzahl);
        console.log('Mitarbeiter Anzahl Gerundet:', mitarbeiterAnzahlGerundet);
        console.log('Tauschmenge pro Woche:', teileProMitarbeiter);
        console.log('Ausstattungsmenge:', ausstattungsmenge);

        box.querySelector('.result').innerHTML = `
            <strong>Ergebnisse:</strong><br>
            Tauschmenge pro Woche: ${teileProMitarbeiter}<br>
            Ausstattungsmenge: ${ausstattungsmenge}
        `;
    }

    const translations = {
    de: {
        artikel: "Artikel",
        artikelname: "Artikelname",
        artikellaengen: "Artikel Längen",
        artikelgroessen: "Artikel Größen",
        vollzeitMitarbeiter: "Vollzeitmitarbeiter",
        teilzeitMitarbeiter: "Teilzeitmitarbeiter",
        tauschquote: "Tauschquote pro Woche",
        lieferrhythmus: "Lieferrhythmus",
        berechnen: "Berechnen",
        ergebnisseAnzeigen: "Ergebnisse anzeigen"
    },
    en: {
        artikel: "Article",
        artikelname: "Article name",
        artikellaengen: "Article lengths",
        artikelgroessen: "Article sizes",
        vollzeitMitarbeiter: "Full-time employee",
        teilzeitMitarbeiter: "Part-time employee",
        tauschquote: "Exchange rate per week",
        lieferrhythmus: "Delivery frequency",
        berechnen: "Calculate",
        ergebnisseAnzeigen: "Show Results"
    }
};

function changeLanguage() {
    const select = document.getElementById('language-select');
    const selectedOption = select.options[select.selectedIndex];
    const selectedLanguage = selectedOption.value;
    const flagImage = selectedOption.getAttribute('data-image');

    // Ändern des Flaggenbildes
    document.getElementById('language-flag').src = flagImage;

    // Texte entsprechend der ausgewählten Sprache ändern
    const elements = document.querySelectorAll('[data-translate-key]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate-key');
        element.innerText = translations[selectedLanguage][key];
    });

    // Anpassung weiterer Elemente
    document.title = translations[selectedLanguage].artikel;
}


    document.addEventListener('DOMContentLoaded', () => {
        const savedResults = JSON.parse(sessionStorage.getItem('results'));
        if (savedResults && savedResults.length > 0) {
            savedResults.forEach(config => createBox(config));
        } else {
            createBox(); // Falls keine gespeicherten Daten vorhanden sind, eine leere Box erstellen
        }
    });
</script>
</body>
</html>
